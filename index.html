<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nsflix</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="content">
        <img src="logo.jpg" alt="Logo">
        <h1>Nsflix</h1>
    </div>
    <div id="filme-info" class="filme-info">
        <img class="banner" src="" alt="banner">
        <h2 id="titulo"></h2>
        <p id="detalhes"></p>
        <button class="button" id="button1">Assistir</button>
        <button class="butterfly" id="button2">Telegram</button>
        <p id="sinopse"></p>
        <h3>Top de Contribuidores</h3>
        <ul id="contribuidores"></ul>
    </div>

    <script>
        // Função para extrair o ID do filme do URL
        function extrairIDDoURL() {
            const url = window.location.href;
            const partesDoURL = url.split('/');
            return partesDoURL[partesDoURL.length - 1];
        }

        // Função para fazer a solicitação à API do TMDb e preencher os valores no HTML
        async function preencherDadosFilme() {
            const idFilme = extrairIDDoURL();
            const url = `https://api.themoviedb.org/3/movie/${idFilme}?api_key=360eb433f3020d94a5de4f0fb52c720&language=pt-BR`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                // Preencher os valores nos elementos HTML
                document.querySelector('.banner').src = `https://image.tmdb.org/t/p/w500${data.poster_path}`;
                document.getElementById('titulo').textContent = data.title;
                document.getElementById('detalhes').textContent = `${data.release_date} • ${data.runtime}m • ${data.genres.map(genre => genre.name).join(' • ')}`;
                document.getElementById('sinopse').textContent = data.overview;
                // Preencher top de contribuidores
                const contribuidores = document.getElementById('contribuidores');
                contribuidores.innerHTML = '';
                if (data.contributors) {
                    data.contributors.slice(0, 5).forEach(contributor => {
                        const li = document.createElement('li');
                        li.textContent = contributor.name;
                        contribuidores.appendChild(li);
                    });
                } else {
                    const li = document.createElement('li');
                    li.textContent = 'Informações de contribuidores não disponíveis.';
                    contribuidores.appendChild(li);
                }
            } catch (error) {
                console.error('Erro ao obter dados do filme:', error);
            }
        }

        // Chamar a função para preencher os dados do filme ao carregar a página
        preencherDadosFilme();
    </script>
</body>
</html>
